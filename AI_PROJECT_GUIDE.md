# ü§ñ AI Assistant Project Analysis Guide

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞. –ù–ï –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∞ –æ–±—ä—è—Å–Ω—è–µ—Ç –ö–ê–ö –∏–∑—É—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.
–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–¥!

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```
voice-whisper-bot/
‚îú‚îÄ‚îÄ telegram-bot/        # Telegram –±–æ—Ç –¥–ª—è –ø—Ä–∏–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö/—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ web/                 # –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ frontend/       # React + Tldraw canvas
‚îÇ   ‚îî‚îÄ‚îÄ backend/        # NestJS API + Prisma ORM
‚îî‚îÄ‚îÄ shared/             # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
```



## üìã –ü–æ—Ä—è–¥–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –ù–ê–ß–ù–ò –° –ë–ê–ó–´ –î–ê–ù–ù–´–•
```bash
# –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –≤—Å–µ–≥–æ
web/backend/prisma/schema.prisma
```
**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Note, TitleHistory, TagHistory –∏ —Ç.–¥.)
- –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏
- –ü–æ–ª—è –∏ –∏—Ö —Ç–∏–ø—ã
- –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã.

### 2Ô∏è‚É£ –ò–ó–£–ß–ò BACKEND API
```bash
# –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
web/backend/src/main.ts

# –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ - —Å–º–æ—Ç—Ä–∏ –≤ –∫–∞–∂–¥–æ–º:
# - *.module.ts (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)
# - *.controller.ts (endpoints)
# - *.service.ts (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
# - dto/*.dto.ts (—Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö)

web/backend/src/
‚îú‚îÄ‚îÄ notes/          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–º–µ—Ç–æ–∫
‚îú‚îÄ‚îÄ ai-tags/        # AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤
‚îú‚îÄ‚îÄ ai-titles/      # AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
‚îú‚îÄ‚îÄ obsidian/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Obsidian
‚îî‚îÄ‚îÄ mock-data/      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

**–ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è:**
1. –û—Ç–∫—Ä–æ–π `*.controller.ts` - –ø–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫–∏–µ endpoints –µ—Å—Ç—å
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint –Ω–∞–π–¥–∏ –º–µ—Ç–æ–¥ –≤ `*.service.ts`
3. –ü—Ä–æ—Å–ª–µ–¥–∏ flow –¥–∞–Ω–Ω—ã—Ö –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ –ë–î

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
- `@Headers('user-id')` - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (—Å–µ–π—á–∞—Å –≤—Å–µ–≥–¥–∞ 'test-user-id')
- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: x=0 –æ–∑–Ω–∞—á–∞–µ—Ç "–≤—ã—á–∏—Å–ª–∏—Ç—å –Ω–∞ frontend", y - –ø–æ–∑–∏—Ü–∏—è –≤ —Å—Ç–æ–ª–±—Ü–µ
- `manuallyPositioned` - —Ñ–ª–∞–≥ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏

### 3Ô∏è‚É£ –ò–ó–£–ß–ò FRONTEND

#### –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```bash
web/frontend/src/main.jsx                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
web/frontend/src/SyncedProductionApp.jsx     # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å canvas
```

#### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```bash
web/frontend/src/components/
‚îú‚îÄ‚îÄ CustomNoteShape.jsx       # –ö–∞–∫ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∑–∞–º–µ—Ç–∫–∏ –Ω–∞ canvas
‚îú‚îÄ‚îÄ NoteModal.jsx            # –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏
‚îú‚îÄ‚îÄ DatePickerModal.jsx      # –í—ã–±–æ—Ä –¥–∞—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏
‚îú‚îÄ‚îÄ ExportToast.jsx          # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —ç–∫—Å–ø–æ—Ä—Ç–µ
‚îî‚îÄ‚îÄ StaticDateHeaderShape.jsx # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–∞—Ç –Ω–∞ canvas
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ SyncedProductionApp.jsx:**
- `calculateColumnX()` - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ X –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–∞—Ç
- `loadNotes()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ—Ç–æ–∫ —Å backend
- `handleMount()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è canvas –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- Event handlers –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∑–∞–º–µ—Ç–∫–∞–º–∏

**–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**
- TODAY (—Å–µ–≥–æ–¥–Ω—è) = X: 5000px
- –ö–∞–∂–¥—ã–π –¥–µ–Ω—å = +/- 230px –æ—Ç TODAY
- Y –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ —Å —É—á–µ—Ç–æ–º gaps

### 4Ô∏è‚É£ –ò–ó–£–ß–ò TELEGRAM –ë–û–¢
```bash
telegram-bot/index.js        # –í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
telegram-bot/index.js.archive # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `transcribeAudio()` - —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Whisper API
- `generateTitle()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —á–µ—Ä–µ–∑ GPT
- `saveNoteToDatabase()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ backend
- Handlers: `bot.on('voice')`, `bot.on('text')`, `bot.on('audio')`, `bot.on('video')`

**–í–∞–∂–Ω–æ:** –ë–æ—Ç –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, backend —Å–∞–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç.

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### Flow —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ –∏–∑ Telegram:
1. **Telegram Bot** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. **Whisper API** ‚Üí —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ (–µ—Å–ª–∏ –≥–æ–ª–æ—Å–æ–≤–æ–µ)
3. **OpenAI API** ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
4. **Backend API** ‚Üí POST /api/notes (–±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
5. **Backend** ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –≤ —Å—Ç–æ–ª–±—Ü–µ –¥–∞—Ç—ã
6. **Database** ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å x=0, calculated y
7. **Frontend** ‚Üí –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é X —á–µ—Ä–µ–∑ `calculateColumnX()`

### Flow —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
1. **Canvas Click** ‚Üí –æ—Ç–∫—Ä—ã—Ç–∏–µ NoteModal
2. **NoteModal** ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ title/content/tags
3. **Backend API** ‚Üí PATCH /api/notes/:id
4. **Database** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
5. **Canvas** ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ shape —á–µ—Ä–µ–∑ onNoteUpdate callback

## üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üéØ –í–ê–ñ–ù–û: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**–í–°–ï –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ—Ä–Ω–µ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö:**
```bash
/.env.dev   # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ—Ä—Ç—ã 3001, 5433)
/.env.prod  # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ø–æ—Ä—Ç—ã 3002, 5434)
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```
–ö–æ—Ä–Ω–µ–≤—ã–µ .env —Ñ–∞–π–ª—ã
        ‚Üì
    dotenv-cli (–≤ package.json)
        ‚Üì
    process.env –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
        ‚Üì
 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
 Bot      Backend     Frontend
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **npm run dev:all** ‚Üí dotenv –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env.dev ‚Üí –≤—Å–µ –º–æ–¥—É–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- **npm run prod:all** ‚Üí dotenv –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env.prod ‚Üí –≤—Å–µ –º–æ–¥—É–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- **–ë–ï–ó FALLBACK –∑–Ω–∞—á–µ–Ω–∏–π** - –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–∏—Ç –æ—à–∏–±–∫—É

### –ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```bash
# Backend & Bot
OPENAI_KEY=...
TELEGRAM_TOKEN=...
API_URL=http://localhost:3001/api  # –∏–ª–∏ 3002 –¥–ª—è prod
PORT=3001  # –∏–ª–∏ 3002 –¥–ª—è prod
DATABASE_URL=postgresql://...

# Obsidian –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
OBSIDIAN_HOST=127.0.0.1
OBSIDIAN_PORT=27123
OBSIDIAN_API_KEY=...
OBSIDIAN_FOLDER=...
OBSIDIAN_VAULT_NAME=...

# Frontend (Vite)
VITE_API_URL=http://localhost:3001/api  # –∏–ª–∏ 3002 –¥–ª—è prod
```

### ‚ö†Ô∏è –ù–ï–¢ hardcoded –∑–Ω–∞—á–µ–Ω–∏–π!
- –í—Å–µ URL, –ø–æ—Ä—Ç—ã, –∫–ª—é—á–∏ - —Å—Ç—Ä–æ–≥–æ –∏–∑ .env —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ: `if (!process.env.VAR) throw Error(...)`
- Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç: `if (!import.meta.env.VITE_API_URL) throw Error(...)`

## üìù –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

### API –ü–∞—Ç—Ç–µ—Ä–Ω—ã
- –í—Å–µ endpoints –ø–æ–¥ `/api/*`
- Headers: `user-id` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å–µ–π—á–∞—Å –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)
- Response: –≤—Å–µ–≥–¥–∞ JSON
- Errors: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã

### –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫
- **Column notes** (–∏–∑ telegram/–∫–Ω–æ–ø–∫–∏): x=0, y=calculated, manuallyPositioned=false
- **Manually moved**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è, manuallyPositioned=true
- **Merged notes**: –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –≥–æ—Ç–æ–≤—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

### –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- –í—Å–µ –¥–∞—Ç—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –¥–æ 00:00:00
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞
- `date` field –≤ Note - –¥–∞—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

## üîç –ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ–∏—á—É:
1. –ù–∞–π–¥–∏ UI —ç–ª–µ–º–µ–Ω—Ç –≤ frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
2. –ù–∞–π–¥–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è (onClick, onSubmit –∏ —Ç.–¥.)
3. –ü—Ä–æ—Å–ª–µ–¥–∏ API –≤—ã–∑–æ–≤ (fetch/axios)
4. –ù–∞–π–¥–∏ endpoint –≤ backend controller
5. –ò–∑—É—á–∏ service –º–µ—Ç–æ–¥ –∏ —Ä–∞–±–æ—Ç—É —Å –ë–î
6. –ü—Ä–æ–≤–µ—Ä—å —Å—Ö–µ–º—É Prisma –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∏—á—É:
1. –û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã ‚Üí –æ–±–Ω–æ–≤–∏ schema.prisma
2. –°–æ–∑–¥–∞–π migration: `npx prisma migrate dev`
3. –î–æ–±–∞–≤—å service –º–µ—Ç–æ–¥—ã –≤ backend
4. –°–æ–∑–¥–∞–π/–æ–±–Ω–æ–≤–∏ endpoints –≤ controller
5. –î–æ–±–∞–≤—å UI –≤ frontend
6. –°–≤—è–∂–∏ frontend —Å API

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞!** –ù–µ—Ç fallback –∑–Ω–∞—á–µ–Ω–∏–π - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–¥–µ—Ç –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- **dotenv-cli** –∑–∞–≥—Ä—É–∂–∞–µ—Ç .env —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞:** .env.dev (–ø–æ—Ä—Ç—ã 3001/5433) –∏ .env.prod (–ø–æ—Ä—Ç—ã 3002/5434)
- **Frontend:** Vite –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å VITE_
- –ò–∑–º–µ–Ω–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é? –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã!

### User Management
- **–ù–ï–¢ —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!** –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- `userId` - –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –í—Å–µ –∑–∞–º–µ—Ç–∫–∏ –≤–∏–¥–Ω—ã –Ω–∞ –æ–¥–Ω–æ–º canvas

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- Frontend –í–°–ï–ì–î–ê –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç X –¥–ª—è column notes
- Backend –ù–ò–ö–û–ì–î–ê –Ω–µ –∑–Ω–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é X –ø–æ–∑–∏—Ü–∏—é —Å—Ç–æ–ª–±—Ü–æ–≤
- Y –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å gaps (–¥—ã—Ä—ã) - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### Tldraw –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- Shapes –∏–º–µ—é—Ç —Å–≤–æ–∏ ID (–æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç Note.id)
- noteIdMap —Å–≤—è–∑—ã–≤–∞–µ—Ç Note.id ‚Üî Shape.id
- Canvas –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

### Prisma
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã —Ç—Ä–µ–±—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- `npx prisma generate` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `npx prisma studio` –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ë–î

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ–¥–∏–Ω —Ä–∞–∑)
npm run install:all

# 2. –ó–∞–ø—É—Å–∫ –ë–î Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
npm run db:dev:up   # DEV: PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 5433
npm run db:prod:up  # PROD: PostgreSQL –Ω–∞ –ø–æ—Ä—Ç—É 5434

# 3. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run dev:all   # DEV —Ä–µ–∂–∏–º: –≤—Å–µ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 3001/5173
npm run prod:all  # PROD —Ä–µ–∂–∏–º: –≤—Å–µ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 3002/8080
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –µ—Å—Ç—å –≤ –ë–î
cat web/backend/prisma/schema.prisma

# 2. –ù–∞–π–¥–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints
grep -r "@Post\|@Get\|@Patch\|@Delete" web/backend/src --include="*.controller.ts"

# 3. –ù–∞–π–¥–∏ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React
ls web/frontend/src/components/

# 4. –ù–∞–π–¥–∏ API –≤—ã–∑–æ–≤—ã –∏–∑ frontend (—Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ!)
grep -r "API_URL" web/frontend/src --include="*.jsx"

# 5. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env.dev   # –î–ª—è DEV —Ä–µ–∂–∏–º–∞
cat .env.prod  # –î–ª—è PROD —Ä–µ–∂–∏–º–∞

# 6. –ü—Ä–æ–≤–µ—Ä—å –∫–∞–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã
ps aux | grep -E "node|npm|nest|prisma"
```

## üí° –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–æ–µ–∫—Ç–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ** - –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
2. **–í—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ** - –Ω–µ—Ç –æ–±–ª–∞–∫–∞, –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **Canvas –∫–∞–∫ –æ—Å–Ω–æ–≤–∞** - –≤—Å–µ –∫—Ä—É—Ç–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ Tldraw
4. **Telegram –∫–∞–∫ input** - –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏
5. **Obsidian –∫–∞–∫ output** - —ç–∫—Å–ø–æ—Ä—Ç –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

---

## üìå –ù–ï –ó–ê–ë–£–î–¨

- –ß–∏—Ç–∞–π –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ - —Ç–∞–º –º–Ω–æ–≥–æ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–π Network tab –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è API
- –ò—Å–ø–æ–ª—å–∑—É–π `console.log` –æ–±–∏–ª—å–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
- Backend –ª–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç flow –¥–∞–Ω–Ω—ã—Ö
- Frontend –ª–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å canvas

 –æ–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ web/dev-rules-coverd.md - —Ç–∞–º —Å–æ–±—Ä–∞–Ω—ã –æ—Å–Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ –º–µ—Ç–æ–¥—ã –∏—Ö —Ä–µ—à–µ–Ω–∏—è
 –æ–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ñ–∞–π–ª—ã  dev-rules-....md - —Ç–∞–º –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –∫–æ–Ω—Ä–µ–∫—Ç–Ω—ã—Ö —Ç–µ–º —Ç–∏–ø–∞ —Ä–∞–±–æ—Ç–∞ —Å –∞–ø–∏ –∏ —Ç.–¥.


**–≠—Ç–æ—Ç —Ñ–∞–π–ª –ù–ï –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∞ —É—á–∏—Ç –ö–ê–ö –µ–≥–æ –Ω–∞–π—Ç–∏ –∏ –ø–æ–Ω—è—Ç—å!**