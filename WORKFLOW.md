# ðŸš€ DEV â†’ PROD WORKFLOW

## ðŸ“ Ð•Ð–Ð•Ð”ÐÐ•Ð’ÐÐÐ¯ Ð ÐÐ‘ÐžÐ¢Ð (DEV)

### Ð—Ð°Ð¿ÑƒÑÐº DEV Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:
```bash
# 1. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð‘Ð”
npm run db:dev:up

# 2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð²ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
npm run dev:all
```

**Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑˆÑŒ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ð°Ñ…:**
- Frontend: http://localhost:5173 (hot reload)
- Backend: http://localhost:3001
- Database: localhost:5433

## ðŸŽ¯ Ð”Ð•ÐŸÐ›ÐžÐ™ Ð’ PRODUCTION

### ÐšÐ¾Ð³Ð´Ð° Ð³Ð¾Ñ‚Ð¾Ð² Ð²Ñ‹ÐºÐ°Ñ‚Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð² prod:

```bash
# 1. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ DEV
Ctrl+C

# 2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ PROD Ð‘Ð”
npm run db:prod:up

# 3. Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ PROD Ð‘Ð” (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ñ€Ð°Ð·!)
npm run db:prod:init

# 4. Ð‘Ð¸Ð»Ð´ Ð¸ Ð·Ð°Ð¿ÑƒÑÐº PROD
npm run prod:all
```

**Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ PROD Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ð°Ñ…:**
- Frontend: http://localhost:8080 (ÑÑ‚Ð°Ñ‚Ð¸ÐºÐ° Ð¸Ð· dist)
- Backend: http://localhost:3002
- Database: localhost:5434

## ðŸ“¦ Ð§Ð¢Ðž ÐŸÐ ÐžÐ˜Ð¡Ð¥ÐžÐ”Ð˜Ð¢ ÐŸÐ Ð˜ `npm run prod:all`:

1. **ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±Ð¸Ð»Ð´** (Ð½Ð¾Ð²Ð¾Ðµ!):
   - Backend ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð² `web/backend/dist`
   - Frontend ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ÑÑ Ð² `web/frontend/dist`

2. **Ð—Ð°Ð¿ÑƒÑÐº Ð¸Ð· ÑÐ¾Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²**:
   - Backend: `node dist/main` (Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹)
   - Frontend: `serve dist` (ÑÑ‚Ð°Ñ‚Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹)
   - Bot: production Ñ€ÐµÐ¶Ð¸Ð¼

## ðŸ”„ ÐŸÐ•Ð Ð•ÐÐžÐ¡ Ð”ÐÐÐÐ«Ð¥ DEV â†’ PROD

```bash
# Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ½Ð¾Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… (ÐºÐ¾Ð³Ð´Ð° Ð½ÑƒÐ¶Ð½Ð¾)
pg_dump -h localhost -p 5433 -U postgres voice_notes_db > backup.sql
psql -h localhost -p 5434 -U postgres voice_notes_db_prod < backup.sql
```

## âš ï¸ Ð’ÐÐ–ÐÐž ÐŸÐžÐœÐÐ˜Ð¢Ð¬:

1. **DEV = Ð³Ð¾Ñ€ÑÑ‡Ð°Ñ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°** (Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐµÑˆÑŒ ÐºÐ¾Ð´ - ÑÑ€Ð°Ð·Ñƒ Ð²Ð¸Ð´Ð¸ÑˆÑŒ)
2. **PROD = ÑÑ‚Ð°Ñ‚Ð¸Ñ‡Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹** (Ð½ÑƒÐ¶ÐµÐ½ Ð±Ð¸Ð»Ð´ Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹)
3. **Ð”Ð²Ð° Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð±Ð¾Ñ‚Ð°** (Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð² .env.dev Ð¸ .env.prod)
4. **Ð”Ð²Ðµ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð‘Ð”** (dev Ð½Ð° 5433, prod Ð½Ð° 5434)

## ðŸŽ¯ ÐŸÐ ÐžÐ¡Ð¢ÐÐ¯ Ð¡Ð¥Ð•ÐœÐ:

```
Ð ÐÐ—Ð ÐÐ‘ÐžÐ¢ÐšÐ:
ÐšÐ¾Ð´ â†’ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð» â†’ Ð¡Ñ€Ð°Ð·Ñƒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ (hot reload)

ÐŸÐ ÐžÐ”ÐÐšÐ¨Ð:
ÐšÐ¾Ð´ â†’ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ð» â†’ npm run prod:all â†’ Ð‘Ð¸Ð»Ð´ â†’ Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð¾Ð²Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ
```

## âœ… ÐšÐžÐœÐÐÐ”Ð«-Ð¨ÐŸÐÐ Ð“ÐÐ›ÐšÐ:

| Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑˆÑŒ | ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° |
|------------|---------|
| Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° | `npm run dev:all` |
| Ð’Ñ‹ÐºÐ°Ñ‚Ð¸Ñ‚ÑŒ Ð² Ð¿Ñ€Ð¾Ð´ | `npm run prod:all` |
| Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð±Ð¸Ð»Ð´ | `npm run prod:build` |
| ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð‘Ð” | `docker ps` |