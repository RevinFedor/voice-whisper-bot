2da75879-c718-47af-8ebb-3ef963d44bd3
# Резонирующие идеи для системы заметок

## Текущее состояние плана

**Что набросали:** Система где заметки раскрываются по уровням (метафора → итог → процесс → обогащенная версия), динамический центр поиска вместо статичного графа, типы связей между заметками (решает/опровергает/дополняет), индексация с метафорами и ключевыми словами.

**Основные проблемы:** 
1. Нет четкого сценария зачем вообще перечитывать заметки (только поиск решений? ностальгия? обучение?)
2. Слишком много ручной работы - метафоры, связи, теги нужно проставлять
3. Технически сложная реализация - векторный поиск, AI-анализ, интеграция Obsidian с tldraw
4. Раскрывающиеся заметки банальны, динамический граф фантастичен

**Что нужно для финального плана:**
- Определить конкретные use cases: когда и зачем я буду обращаться к системе
- Выбрать что автоматизируется AI, а что остается ручным
- Решить архитектуру: все в Obsidian или гибрид с внешней БД
- Понять минимальный MVP - что реально нужно для начала работы
- Определить как заметки попадают из telegram/canvas в финальную систему с индексацией

**Ключевой вопрос:** Это система для активного использования или архив с возможностью поиска?

## Ключевая концепция: Канвас показывает СМЫСЛ, не текст

На канвасе отображается не заметка, а **система понимания** заметки. 

Пример с "Нетворкинг и отношения":
- Вместо 50 строк текста видишь карточку
- На карточке: метафора "Эффективная игра" + визуальные маркеры
- При клике разворачивается ИТОГ (несколько абзацев осмысления)
- ПРОЦЕСС спрятан еще глубже (как я к этому пришел)

## Структура обработанной заметки

**Метафора** (вместо заголовка): "Температура не помеха вайбу"

**Итог** (развернутый, 5-10 строк):
В правильном состоянии общение происходит само. Неважно что не выспался, болеешь, опоздал - если есть внутренний кайф, все сложится. Проверки от девушек ("все мужики не очень") - это игра, а не атака. Знаки внимания очевидны когда расслаблен: "буду ждать", "дамский угодник", сватовство подругой. Схема простая: кинул рофл → спросил про работу → пошел диалог.

**Процесс** (свернут по умолчанию):
[Вся история дня с деталями, именами, ситуациями]

## Уровни раскрытия заметки (главная идея!) - Декомпозиция

**Уровень 0** - базовые элементы заметки:
- Метафора (3-5 слов)
- Итог (5-10 строк, можно раскрыть в более подробный)
- Процесс (свернут по умолчанию, можно развернуть)

Все это еще нулевой уровень - просто текст с возможностью развернуть/свернуть.

**Уровень 1** - кликабельные концепции внутри текста:
В рамках итога или процесса есть фразы из 3-4 слов. Кликаешь - раскрывается подробное пояснение.

Например: "Социум - это **эффективная игра** с **холодным/теплым** подходом"

Кликаешь на **эффективная игра**:
→ Раскрывается объяснение метафоры с примерами

Кликаешь на **холодным/теплым**:
→ Описание техники, когда применять

Внутри объяснений могут быть другие кликабельные концепции. Многоуровневая вложенность.

**Архитектурная проблема**: Как определить что делать кликабельным? Нужна система выделения ключевых концепций.


## Поиск похожих заметок (боковая панель)

При клике на заметку справа открывается окно:
- AI находит похожие по смыслу
- Показывает эволюцию мысли
- Предлагает противоположные взгляды

Цепочка работает только в контексте ОДНОЙ заметки, не глобально.

## Проблема со связями

Связи между заметками НЕ последовательные:
- Элемент из заметки 1 может быть связан с элементом из заметки 47
- Это не паутина, а хаотичное облако
- Глобальные цепочки невозможны
- Можно делать локальные цепочки для конкретной темы

## Метафоры как якоря памяти

Повторяющиеся метафоры в твоих заметках:
- "Эффективная игра" = социальная стратегия работает
- "На все похуй" = освобождение от тревоги
- "Домашние демоны" = придуманные страхи
- "Температура не помеха" = физическое состояние не блокер

Метафора = мгновенное понимание сути без чтения.

## Что НЕ резонирует

❌ Цветовые схемы (зеленый/красный/синий) - банально
❌ Формы (круги/квадраты) - не применимо
❌ Этапы реализации - мы определяем юзер флоу, не план разработки
❌ Глобальные цепочки - технически невозможно, потому что у заметки может быть много связей с разными заметками, она может быть в разной части разных цепочек, элемент из заметки 1 может быть связан с элементом из заметки 47, это не паутина а хаотичное облако, связи не последовательные

## Маркеры работают только относительно центра

Маркеры заметок (решено/в процессе/горячо/холодно) имеют смысл только по отношению к чему-то. Заметка может быть "решена" только относительно конкретной проблемы, "горячая" только относительно текущей темы. В Obsidian есть статичный граф с тегами, но у нас центр должен быть динамичным - любой запрос, метафора, персона, временной период.

## Динамический центр вместо статичного графа

Пишешь в поиске: "не хочу идти в клуб" или выбираешь метафору "эффективная игра" → в центре появляется твой запрос → вокруг заметки ранжированные по релевантности → ближе = более подходящие. Можно выбрать персону (Витя), период (эта неделя), проблему (социальная тревога) или комбинацию нескольких центров для точной выборки.

## Конкретный юзер флоу навигации

**Шаг 1:** Вводишь запрос "боюсь конфликта" → появляется граф с запросом в центре и 5-10 релевантными заметками вокруг.
**Шаг 2:** Кликаешь на заметку "Баскетбол конфликт решен" → справа открывается панель: "Эта заметка РЕШАЕТ: [страх драки]", "ДОПОЛНЯЕТСЯ в: [правило про конфликты]", "ПРОТИВОРЕЧИТ: [старые страхи]".
**Шаг 3:** В правой панели кликаешь на связь → граф перестраивается с новым центром → видна траектория навигации.

## Где что отображается в интерфейсе

**Основной канвас:** только текущий контекст (центр + связанные заметки), НЕ все заметки сразу. **Правая панель при клике:** типы связей (решает/дополняет/опровергает), ссылки на связанные, метаданные. **При ховере:** только превью (метафора + первая строка итога), без перегруза информацией. **Режим траектории:** отдельная кнопка "Показать эволюцию" → канвас становится timeline со стрелками развития мысли.

## Типы связей между заметками

**Решает** - новая заметка решает проблему из старой. **Опровергает** - новый опыт противоречит старому выводу. **Дополняет** - добавляет контекст или детали. **Обобщает** - выводит правило из частных случаев. **Deprecated** - устаревшая заметка со ссылкой на актуальную версию. Эти связи показываются в правой панели при клике на заметку, а не на самом графе (иначе будет визуальный хаос).

## Минимальный набор данных для индексации

```javascript
{
  // Основные
  id: "note_123",
  title: "Нетворкинг и отношения",
  date: "2024-08-14",
  
  // Для поиска
  metaphor: "эффективная игра",  // главная метафора
  keywords: ["нетворкинг", "девушки", "социум", "стратегия"],  // автовыделение
  entities: ["Рита", "Катя", "Витя"],  // имена людей
  
  // Для фильтрации
  type: "strategy",  // strategy/insight/observation/question/emotion
  energy: "gives",  // gives/takes/neutral
  state: "confident",  // confident/anxious/aggressive/philosophical
  
  // Для связей (проставляется вручную или AI)
  solves: ["страх_общения"],
  tags: ["социальная_игра", "планирование"]
}
```

## Будущие поля для расширения

```javascript
{
  // Векторный поиск
  embedding: [0.23, -0.45, ...],  // 1536-мерный вектор
  embedding_model: "text-embedding-ada-002",
  
  // Расширенные связи
  relations: {
    develops: ["note_456"],  // развивает мысль из
    deprecated_by: "note_789",  // устарело, см. новое
    contradicts: ["note_234"],  // противоречит
    supports: ["note_567"],  // подтверждает
    inspired_by: ["note_890"]  // вдохновлено
  },
  
  // Контекст создания
  context: {
    trigger: "after_social",  // после события/дома/во_сне
    location: "home",  // дом/улица/транспорт
    physical_state: "tired",  // уставший/бодрый/болею
    preceded_by: "note_111"  // после какой заметки создана
  },
  
  // Статистика
  stats: {
    views: 15,
    references: 3,  // сколько раз ссылались
    last_accessed: "2024-08-20",
    relevance_score: 0.87  // динамически пересчитывается
  },
  
  // AI-обработка
  ai_summary: "Социум как игра требует стратегии",  // одно предложение
  ai_keywords: ["game_theory", "social_dynamics"],  // semantic tags
  processing_level: "integrated",  // raw/processed/integrated
  confidence_score: 0.92  // уверенность AI в анализе
}
```

---

*Фокус на уровнях раскрытия и кликабельных концепциях - это ключ к пониманию без чтения всего текста.*
