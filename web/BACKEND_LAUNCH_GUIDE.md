# üöÄ Backend Launch Guide - Voice Notes with TLDraw

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend (NestJS + Prisma + PostgreSQL):
- ‚úÖ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–∞—Ç–∞–º —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥—ã—Ä–æ–∫
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
- ‚úÖ –§–ª–∞–≥ `manuallyPositioned` –¥–ª—è –ø–µ—Ä–µ—Ç–∞—â–µ–Ω–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ http://localhost:3001/api

### Frontend (React + TLDraw):
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É" (—Ä–∞–Ω–¥–æ–º–Ω–∞—è –¥–∞—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è demo –¥–∞–Ω–Ω—ã—Ö

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL –µ—Å–ª–∏ –Ω–µ—Ç
brew install postgresql@14
brew services start postgresql@14

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
createdb voice_notes_db

# –ò–ª–∏ —á–µ—Ä–µ–∑ psql
psql -U postgres
CREATE DATABASE voice_notes_db;
\q
```

### 2. Backend

```bash
cd web/backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npx prisma generate

# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
npx prisma migrate dev --name init

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
npm run start:dev

# Backend –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:3001
# Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:3001/api
```

### 3. Frontend

```bash
cd web/frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:5173/?sync=true
```

## üéÆ –†–µ–∂–∏–º—ã –∑–∞–ø—É—Å–∫–∞

### Frontend —Ä–µ–∂–∏–º—ã:
- `http://localhost:5173/` - Standalone –≤–µ—Ä—Å–∏—è –±–µ–∑ backend
- `http://localhost:5173/?sync=true` - **Production —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π** ‚úÖ
- `http://localhost:5173/?test=position` - –¢–µ—Å—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- `http://localhost:5173/?test=date` - –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Backend (.env):
```env
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/voice_notes_db?schema=public"
PORT=3001
FRONTEND_URL=http://localhost:5173
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø–∞—Ä–æ–ª—å:
```env
DATABASE_URL="postgresql://YOUR_USER:YOUR_PASSWORD@localhost:5432/voice_notes_db?schema=public"
```

## üìù API Endpoints

### Notes:
- `GET /api/notes` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
- `POST /api/notes` - –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É
- `POST /api/notes/random` - –°–æ–∑–¥–∞—Ç—å —Ä–∞–Ω–¥–æ–º–Ω—É—é –∑–∞–º–µ—Ç–∫—É
- `POST /api/notes/initialize` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å demo –¥–∞–Ω–Ω—ã–µ
- `PATCH /api/notes/:id/position` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ—Å–ª–µ drag
- `DELETE /api/notes/:id` - –£–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
- `GET /api/notes/dates` - –ü–æ–ª—É—á–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞—Ç—ã

## üéØ User Cases (–≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç!)

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É"
- –ó–∞–º–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–∞–Ω–¥–æ–º–Ω—É—é –¥–∞—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–µ—Ç –≤ –∫–æ–Ω–µ—Ü –∫–æ–ª–æ–Ω–∫–∏ –∏–ª–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥—ã—Ä–∫—É

### 2. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
- –ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ
- –ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- –§–ª–∞–≥ `manuallyPositioned = true`
- –ó–∞–º–µ—Ç–∫–∞ –±–æ–ª—å—à–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
- –ï—Å–ª–∏ –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ –ø–µ—Ä–µ—Ç–∞—â–∏–ª–∏ –∑–∞–º–µ—Ç–∫—É - –æ—Å—Ç–∞–ª–∞—Å—å –¥—ã—Ä–∫–∞
- –ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç —ç—Ç—É –¥—ã—Ä–∫—É
- –ï—Å–ª–∏ –¥—ã—Ä–æ–∫ –Ω–µ—Ç - –≤—Å—Ç–∞–Ω–µ—Ç –≤ –∫–æ–Ω–µ—Ü

### 4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –ü–æ–∑–∏—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

## üõ†Ô∏è Troubleshooting

### PostgreSQL –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
brew services list

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
brew services restart postgresql@14

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql -U postgres -d voice_notes_db -c "SELECT 1"
```

### –û—à–∏–±–∫–∞ Prisma –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
# –°–±—Ä–æ—Å–∏—Ç—å –ë–î –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ
npx prisma migrate reset
npx prisma migrate dev
```

### CORS –æ—à–∏–±–∫–∏:
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ backend/.env —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π FRONTEND_URL

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç 3001
lsof -i :3001
# –ï—Å–ª–∏ –∑–∞–Ω—è—Ç - —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å PORT –≤ .env
```

## üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î

```bash
# Prisma Studio (GUI –¥–ª—è –ë–î)
cd web/backend
npm run prisma:studio

# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5555
```

## ‚ú® –ì–æ—Ç–æ–≤–æ!

1. Backend: http://localhost:3001
2. Swagger: http://localhost:3001/api
3. Frontend: http://localhost:5173/?sync=true
4. Prisma Studio: http://localhost:5555

–í—Å–µ user cases —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º! üéâ