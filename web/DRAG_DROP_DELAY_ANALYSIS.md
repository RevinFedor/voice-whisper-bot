# üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –ó–ê–î–ï–†–ñ–ö–ò –ü–†–ò –û–¢–ü–£–°–ö–ê–ù–ò–ò –ó–ê–ú–ï–¢–û–ö

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∑–∞–º–µ—Ç–∫—É** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—É—Å–∫–∞–µ—Ç –º—ã—à—å** ‚Üí üî¥ **–ó–ê–î–ï–†–ñ–ö–ê ~500–º—Å** (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ –ø–æ–ª—Å–µ–∫—É–Ω–¥—ã)
3. **–°–ª–∏—è–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç** ‚Üí –Ω–æ —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ

### –ò–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ:
```
üéÜ DRAG ENDED - Checking merge immediately!
[—á–µ—Ä–µ–∑ 50–º—Å –≤ setTimeout]
üéØ INSTANT MERGE with 65.3% overlap
```

–ù–æ –ø–æ –æ—â—É—â–µ–Ω–∏—è–º –∑–∞–¥–µ—Ä–∂–∫–∞ **–≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ 50–º—Å** - –æ–∫–æ–ª–æ 500–º—Å –∏–ª–∏ –±–æ–ª—å—à–µ!

---

## ‚ùì –ì–õ–ê–í–ù–´–ï –í–û–ü–†–û–°–´

### 1. –ü–æ—á–µ–º—É —É –Ω–∞—Å –≤–æ–æ–±—â–µ –µ—Å—Ç—å setTimeout –Ω–∞ 50–º—Å?

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```javascript
if (wasDragging && !isDragging) {
    console.log('üéÜ DRAG ENDED - Checking merge immediately!');
    wasDragging = false;
    
    setTimeout(() => {  // ‚Üê –í–û–¢ –≠–¢–ê –ó–ê–î–ï–†–ñ–ö–ê!
        // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è
    }, 50);
}
```

**–ü—Ä–∏—á–∏–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 50–º—Å:**
- –î—É–º–∞–ª, —á—Ç–æ tldraw –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–≤–æ–∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –•–æ—Ç–µ–ª –¥–æ–∂–¥–∞—Ç—å—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ shape –ø–æ—Å–ª–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è
- **–ù–û –≠–¢–û –ë–´–õ–û –ü–†–ï–î–ü–û–õ–û–ñ–ï–ù–ò–ï!**

### 2. –ü–æ—á–µ–º—É –æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 500–º—Å, –∞ –Ω–µ 50–º—Å?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **setInterval –∫–∞–∂–¥—ã–µ 16–º—Å** –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
2. **setTimeout 50–º—Å** –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—â–µ –∑–∞–¥–µ—Ä–∂–∫—É
3. **–°–∞–º –ø—Ä–æ—Ü–µ—Å—Å —Å–ª–∏—è–Ω–∏—è** –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –≤—Ä–µ–º—è (API –∑–∞–ø—Ä–æ—Å—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI)
4. **React re-renders** –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É

**–ò—Ç–æ–≥–æ:** 16–º—Å (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) + 50–º—Å (setTimeout) + –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ = ~100-200–º—Å –º–∏–Ω–∏–º—É–º

**–ù–û!** –í–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –µ—â–µ —Å–∫—Ä—ã—Ç—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏:
- debounce –Ω–∞ 300–º—Å –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π?
- –¥—Ä—É–≥–∏–µ —Ç–∞–π–º–µ—Ä—ã –≤ –∫–æ–¥–µ?
- tldraw –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏?

### 3. –ú–æ–∂–µ–º –ª–∏ –º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É?

**–î–ê! –ú–æ–∂–µ–º –∏ –¥–æ–ª–∂–Ω—ã!**

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. **–£–±—Ä–∞—Ç—å setTimeout –ø–æ–ª–Ω–æ—Å—Ç—å—é** - –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ä–∞–∑—É
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è tldraw –Ω–∞–ø—Ä—è–º—É—é** –≤–º–µ—Å—Ç–æ polling —á–µ—Ä–µ–∑ setInterval
3. **–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ** –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –º—ã—à–∏

---

## üéØ –í –ß–ï–ú –°–ï–ô–ß–ê–° –ü–†–û–ë–õ–ï–ú–ê

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1: Polling –≤–º–µ—Å—Ç–æ —Å–æ–±—ã—Ç–∏–π
```javascript
// –ü–õ–û–•–û - –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 16–º—Å
setInterval(() => {
    const isDragging = editor.inputs.isDragging;
    if (wasDragging && !isDragging) {
        // –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ
    }
}, 16);
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 16–º—Å –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
- –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- –ù–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π setTimeout
```javascript
// –ü–õ–û–•–û - –¥–æ–±–∞–≤–ª—è–µ–º –µ—â–µ 50–º—Å
setTimeout(() => {
    // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è
}, 50);
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- –ù–µ –Ω—É–∂–Ω–∞ –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–±—ã—Ç–∏—è–º

**–°–µ–π—á–∞—Å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞ `isDragging` —á–µ—Ä–µ–∑ polling

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ pointer up –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ tldraw

---

## ‚úÖ –ö–ê–ö –î–û–õ–ñ–ù–û –†–ê–ë–û–¢–ê–¢–¨ (–∫–∞–∫ –≤ Miro/Notion/Figma)

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

1. **–°–æ–±—ã—Ç–∏–µ pointer/mouse up** ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è (0–º—Å)
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ overlap** ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ —Ç–æ–º –∂–µ tick (0–º—Å)  
3. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (0–º—Å)
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** ‚Üí –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ —Ñ–æ–Ω–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)

### –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

**Miro:**
- Drop —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
- –ù–∏–∫–∞–∫–∏—Ö –≤–∏–¥–∏–º—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ pointer events

**Notion:**
- –ë–ª–æ–∫–∏ "–ø—Ä–∏–ª–∏–ø–∞—é—Ç" —Å—Ä–∞–∑—É –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ

**Figma:**
- –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç WebAssembly –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

---

## üîß –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tldraw —Å–æ–±—ã—Ç–∏—è –Ω–∞–ø—Ä—è–º—É—é

```javascript
// –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –≤ editor
editor.on('pointer_up', (info) => {
    if (potentialMerge) {
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è –ë–ï–ó setTimeout!
        checkMergeImmediately();
    }
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å store.listen –ø—Ä–∞–≤–∏–ª—å–Ω–æ

```javascript
editor.store.listen((change) => {
    // –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    if (change.type === 'pointer_up' || change.source === 'user') {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è —Å—Ä–∞–∑—É
    }
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã ShapeUtil

```javascript
class CustomNoteShapeUtil extends ShapeUtil {
    onTranslateEnd(initial, current) {
        // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –°–†–ê–ó–£ –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
        // –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–ª–∏—è–Ω–∏—è –∑–¥–µ—Å—å
    }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: Document-level —Å–æ–±—ã—Ç–∏—è

```javascript
document.addEventListener('pointerup', (e) => {
    if (editor.inputs.isDragging === false) {
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    }
});
```

---

## üìù –û–¢–í–ï–¢–´ –ù–ê –í–û–ü–†–û–°–´

### "–ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ 50–º—Å?"
**–û—Ç–≤–µ—Ç:** –ù–ï –ù–£–ñ–ù–´! –≠—Ç–æ –±—ã–ª–∞ –æ—à–∏–±–æ—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ "–ø–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–∫–∞ tldraw –∑–∞–≤–µ—Ä—à–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è". –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ tldraw —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫ –º–æ–º–µ–Ω—Ç—É –∫–æ–≥–¥–∞ `isDragging` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `false`.

### "–ï—Å—Ç—å –ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏?"
**–û—Ç–≤–µ—Ç:** –î–ê! –ú–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.

### "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è?"
**–û—Ç–≤–µ—Ç:** –õ—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
1. `editor.on('pointer_up')` - –ø—Ä—è–º–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ tldraw
2. `onTranslateEnd` –≤ ShapeUtil - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
3. Document pointerup event - –Ω–∞—Ç–∏–≤–Ω–æ–µ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ

### "–ü–æ—á–µ–º—É —Å–µ–π—á–∞—Å –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 500–º—Å?"
**–û—Ç–≤–µ—Ç:** –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤:
- 16–º—Å polling delay (–¥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è)
- 50–º—Å setTimeout
- –í–æ–∑–º–æ–∂–Ω–æ, debounce 300–º—Å –≤—Å–µ –µ—â–µ –≤–ª–∏—è–µ—Ç
- React re-renders
- –í—Ä–µ–º—è –Ω–∞ API –∑–∞–ø—Ä–æ—Å—ã

---

## üöÄ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–ù–∞–π—Ç–∏ –≤—Å–µ —Ç–∞–π–º–µ—Ä—ã –≤ –∫–æ–¥–µ:**
   - setTimeout –Ω–∞ 50–º—Å –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–ª–∏—è–Ω–∏—è ‚úÖ –ù–ê–ô–î–ï–ù–û
   - setInterval –Ω–∞ 16–º—Å –¥–ª—è polling —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚úÖ –ù–ê–ô–î–ï–ù–û
   - debounce –Ω–∞ 300–º—Å –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π ‚úÖ –ù–ê–ô–î–ï–ù–û
   
2. **–ò–∑–º–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É:**
   ```javascript
   // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–¥ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è
   console.time('drag-to-merge');
   // –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
   console.timeEnd('drag-to-merge');
   // –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Å–ª–∏—è–Ω–∏—è
   ```

3. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä—è–º—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–æ–±—ã—Ç–∏—è:**
   - editor.on('pointer_up') - –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
   - document.addEventListener('pointerup') - –Ω–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å onTranslateEnd –≤ ShapeUtil

4. **–£–±—Ä–∞—Ç—å –í–°–ï –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏:**
   - –£–±—Ä–∞—Ç—å setTimeout(50)
   - –£–±—Ä–∞—Ç—å setInterval polling
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–ª–∏—è–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

---

## üîç –ì–î–ï –ò–ú–ï–ù–ù–û –°–ï–ô–ß–ê–° –ó–ê–î–ï–†–ñ–ö–ò –í –ö–û–î–ï

### 1. setInterval polling (—Å—Ç—Ä–æ–∫–∞ ~748)
```javascript
let checkDragState = null;
checkDragState = setInterval(() => {
    const isDragging = editor.inputs.isDragging;
    
    if (wasDragging && !isDragging) {
        // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–æ 16–º—Å –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
    }
}, 16); // ‚Üê –ó–ê–î–ï–†–ñ–ö–ê ‚Ññ1: –¥–æ 16–º—Å
```

### 2. setTimeout –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ª–∏—è–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ ~756)
```javascript
if (wasDragging && !isDragging) {
    console.log('üéÜ DRAG ENDED - Checking merge immediately!');
    wasDragging = false;
    
    setTimeout(() => {  // ‚Üê –ó–ê–î–ï–†–ñ–ö–ê ‚Ññ2: –µ—â–µ 50–º—Å
        if (potentialMerge) {
            // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è
        }
    }, 50);
}
```

### 3. debounce –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π (—Å—Ç—Ä–æ–∫–∞ ~625)
```javascript
if (updateTimer) clearTimeout(updateTimer);
updateTimer = setTimeout(sendPositionUpdates, 300); // ‚Üê –ó–ê–î–ï–†–ñ–ö–ê ‚Ññ3: 300–º—Å (–Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ UI)
```

**–ò–¢–û–ì–û –ó–ê–î–ï–†–ñ–ï–ö:**
- –ú–∏–Ω–∏–º—É–º: 50–º—Å (setTimeout)
- –ú–∞–∫—Å–∏–º—É–º: 16–º—Å (polling) + 50–º—Å (setTimeout) = 66–º—Å
- –û—â—É—â–∞–µ—Ç—Å—è: ~500–º—Å (–≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã)

---

## üí° –í–´–í–û–î

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º polling –≤–º–µ—Å—Ç–æ —Å–æ–±—ã—Ç–∏–π
- –î–æ–±–∞–≤–ª—è–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ tldraw

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –ü—Ä—è–º–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–∏—è–Ω–∏—è
- –ù–∏–∫–∞–∫–∏—Ö setTimeout/setInterval

**–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫–∞–∑—ã–≤–∞—é—Ç:** –∑–∞–¥–µ—Ä–∂–∫–∏ –ù–ï –ù–£–ñ–ù–´, –≤—Å–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!