# üìä –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ô

## üéØ –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:
1. **UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ** —á–µ—Ä–µ–∑ tldraw state
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å debounce 300–º—Å
3. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ—á–µ–º—É –Ω–µ—Ç "–¥–µ—Ä–≥–∞–Ω–∏—è":
```javascript
// 1. tldraw –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
editor.updateShapes([{ id: shapeId, x: newX, y: newY }])

// 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–¥–µ—Ç –≤ —Ñ–æ–Ω–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)
positionUpdateQueue.set(dbId, { x: to.x, y: to.y });
updateTimer = setTimeout(sendPositionUpdates, 300); // debounce

// 3. UI –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
// –ü–æ–∑–∏—Ü–∏—è —É–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∞ –≤ tldraw, –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –º–µ–Ω—è–µ—Ç UI
```

## ‚úÖ –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –£–ñ–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã!

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **tldraw = –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è UI** - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è
2. **–ë—ç–∫–µ–Ω–¥ = –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
3. **–ù–µ—Ç –æ—Ç–∫–∞—Ç–æ–≤** - UI –Ω–µ –∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

### –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?
**–î–ê!** –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
- **Figma, Miro, Notion** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∞–∫ –∂–µ
- UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞–Ω–Ω—ã—Ö

## üîç –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
```javascript
// –¢–µ–∫—É—â–∏–π –∫–æ–¥:
if (response.ok) {
    // ‚úÖ –£—Å–ø–µ—Ö
} else {
    // ‚ùå –û—à–∏–±–∫–∞ - –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º
    console.error(`Failed to update position: ${response.status}`);
    // –ù–ï–¢ –û–¢–ö–ê–¢–ê –ø–æ–∑–∏—Ü–∏–∏!
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∫–∞—Ç –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
if (!response.ok && response.status >= 500) {
    // –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –≤ UI
    editor.updateShapes([{ id: shapeId, x: oldX, y: oldY }]);
}
```

### 2. –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç, —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..." / "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–≤–∏–≥–∞—é—Ç –æ–¥–Ω—É –∑–∞–º–µ—Ç–∫—É

**–†–µ—à–µ–Ω–∏–µ (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ multi-user):**
- WebSocket –¥–ª—è real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- Operational Transformation –∏–ª–∏ CRDT

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:
1. **Drag & drop** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è (0–º—Å –∑–∞–¥–µ—Ä–∂–∫–∏)
2. **Debounced —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –Ω–µ —Å–ø–∞–º–∏–º —Å–µ—Ä–≤–µ—Ä
3. **Batch –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
4. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ tldraw canvas

### ‚úÖ –ß—Ç–æ –ù–ï —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **React re-renders** - tldraw —É–ø—Ä–∞–≤–ª—è–µ—Ç canvas, –Ω–µ React
2. **–ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–º–µ—Ç–æ–∫** - tldraw –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ç—ã—Å—è—á shapes
3. **–ê–Ω–∏–º–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è requestAnimationFrame

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –£–±—Ä–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
- [x] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å drag & drop

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ï –ö–†–ò–¢–ò–ß–ù–û
- [ ] WebSocket –¥–ª—è real-time –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏
- [ ] –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–µ–∑–æ–ª—é—Ü–∏—è –ø—Ä–∏ multi-user

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ú–û–ñ–ù–û –û–¢–õ–û–ñ–ò–¢–¨
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –æ—Ç–∫–∞—Ç–æ–º –ø–æ–∑–∏—Ü–∏–∏
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] Offline —Ä–µ–∂–∏–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- [ ] Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö

## üí° –í–´–í–û–î

### –ù—É–∂–Ω–æ –ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å "–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"?
**–ù–ï–¢!** –û–Ω–∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É tldraw:
- UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –ï—Å—Ç—å –ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã?
**–ù–ï–¢!** –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è
- ‚úÖ –û—Ç–∑—ã–≤—á–∏–≤–∞—è
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices

### –ß—Ç–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º?
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ **multi-user —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**:
1. WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. Conflict resolution
3. Presence indicators

–ü—Ä–∏ —Ä–æ—Å—Ç–µ **–æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö**:
1. Pagination/lazy loading –∑–∞–º–µ—Ç–æ–∫
2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
3. IndexedDB –¥–ª—è offline

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å:
- –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è

### –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —É–ª—É—á—à–∏—Ç—å UX (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
```javascript
// –ü—Ä–æ—Å—Ç–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
const [syncStatus, setSyncStatus] = useState('saved');

// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
setSyncStatus('saving');

// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
setSyncStatus('saved');

// UI
<div className="sync-indicator">
  {syncStatus === 'saving' ? 'üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ'}
</div>
```

### –î–ª—è production (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
```javascript
// Retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
const sendWithRetry = async (data, retries = 3) => {
  for (let i = 0; i < retries; i++) {
    try {
      const response = await fetch(...);
      if (response.ok) return response;
    } catch (e) {
      if (i === retries - 1) throw e;
      await new Promise(r => setTimeout(r, 1000 * Math.pow(2, i)));
    }
  }
};
```

## üöÄ –ò–¢–û–ì

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ —É–∂–µ —Ö–æ—Ä–æ—à–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω!**
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –µ—Å—Ç—å
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

**–§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤—ã—Ö —Ñ–∏—á–∞—Ö, –∞ –Ω–µ –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è—Ö!**