# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã Escape –≤ –º–æ–¥–∞–ª–∫–∞—Ö

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **ModalStackContext** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Escape –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–∞–ª–æ–∫
- **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **LIFO –ø—Ä–∏–Ω—Ü–∏–ø** - –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
- **–ì—Ä—É–ø–ø—ã –º–æ–¥–∞–ª–æ–∫** - —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (–æ—Ç –≤—ã—Å—à–µ–≥–æ –∫ –Ω–∏–∑—à–µ–º—É)
```
1000 - DROPDOWN
900  - AUTOCOMPLETE  
800  - EXPANDED_INPUT (—Ä–∞—Å–∫—Ä—ã—Ç—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫)
700  - TAG_INPUT (–≤–≤–æ–¥ —Ç–µ–≥–∞)
600  - PROMPT_PANEL (AI —á–∞—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)
500  - TAG_PANELS (–ø–∞–Ω–µ–ª–∏ —Ç–µ–≥–æ–≤)
100  - NOTE_MODAL / DATE_PICKER (–æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–∞–ª–∫–∏)
10   - BACKDROP
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
testModalEscape.help()  // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
```

### 2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–≥–æ–ª–æ–≤–æ–∫
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–º–µ—Ç–∫—É (–∫–ª–∏–∫ –Ω–∞ –ª—é–±—É—é)
2. –ù–∞–∂–º–∏—Ç–µ ‚Üï –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
3. **Esc** ‚Üí –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–≤–µ—Ä–Ω–µ—Ç—Å—è
4. **Esc** ‚Üí –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: AI –ø–∞–Ω–µ–ª–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–º–µ—Ç–∫—É
2. –ù–∞–∂–º–∏—Ç–µ ‚ú® (AI —á–∞—Ç)
3. **Esc** ‚Üí —á–∞—Ç –∑–∞–∫—Ä–æ–µ—Ç—Å—è
4. –ù–∞–∂–º–∏—Ç–µ üìú (–ò—Å—Ç–æ—Ä–∏—è)
5. **Esc** ‚Üí –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫—Ä–æ–µ—Ç—Å—è
6. **Esc** ‚Üí –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–µ–≥–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–º–µ—Ç–∫—É
2. –ù–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å" –≤ –±–ª–æ–∫–µ —Ç–µ–≥–æ–≤
3. –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç
4. **Esc** ‚Üí –æ—Ç–º–µ–Ω–∞ –≤–≤–æ–¥–∞
5. –ù–∞–∂–º–∏—Ç–µ ‚ú® –≤ –±–ª–æ–∫–µ —Ç–µ–≥–æ–≤
6. **Esc** ‚Üí –ø–∞–Ω–µ–ª—å –∑–∞–∫—Ä–æ–µ—Ç—Å—è
7. **Esc** ‚Üí –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: DatePicker
1. –ù–∞–∂–º–∏—Ç–µ "‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É"
2. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤—ã–±–æ—Ä –¥–∞—Ç—ã
3. **Esc** ‚Üí –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è

## üìä Debug –∫–æ–º–∞–Ω–¥—ã

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–µ–∫ –º–æ–¥–∞–ª–æ–∫
testModalEscape.checkStack()

// –ü–æ–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
checkPriorities()

// –¢–µ—Å—Ç DatePicker
testDatePicker()
```

## üîç –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

–ü—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –º–æ–¥–∞–ª–∫–∞–º–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- `üìå Registering modal` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å—Ç–µ–∫–µ
- `üìö Modal stack updated` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–µ–∫–∞
- `‚å®Ô∏è Escape pressed` - –Ω–∞–∂–∞—Ç–∏–µ Esc
- `‚úÖ Escape handled by` - –∫–∞–∫–∞—è –º–æ–¥–∞–ª–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∞
- `üì§ Unregistering modal` - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å—Ç–µ–∫–∞

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã
- **TITLE_GROUP**: –∏—Å—Ç–æ—Ä–∏—è, AI —á–∞—Ç, –ø—Ä–æ–º–ø—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **TAG_GROUP**: AI —Ç–µ–≥–∏, –∏—Å—Ç–æ—Ä–∏—è —Ç–µ–≥–æ–≤, Obsidian —Ç–µ–≥–∏

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏ –∏–∑ –≥—Ä—É–ø–ø—ã, –¥—Ä—É–≥–∏–µ –ø–∞–Ω–µ–ª–∏ —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è.

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- **INPUT_GROUP**: —Ä–∞—Å–∫—Ä—ã—Ç—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ input —Ç–µ–≥–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –ü–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è
1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Å –≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
2. –ü—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞—Ö - –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π
3. –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–π

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤—Å–µ –º–æ–¥–∞–ª–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç Esc:
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (LIFO)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–∞–ª–∫–∏